---
export async function getStaticPaths() {
  try {
    const response = await fetch("http://localhost:8080/client/apps");

    if (!response.ok) {
      throw new Error("Failed to fetch apps");
    }

    const apps = await response.json();

    console.log("Fetched apps:", apps);

    return apps.map((app: { slug: string; name: string }) => ({
      params: { app: app.slug },
      props: {
        appName: app.name,
        appData: app,
      },
    }));
  } catch (error) {
    console.error("Error fetching static paths:", error);
    return [];
  }
}

const { appName, appData } = Astro.props;

export const prerender = true;
import Layout from "../../layout/layout.astro";
import RegisterForm from "../../sections/register-form.astro";
---

<Layout>
  <RegisterForm appName={appName} appData={appData} />
</Layout>
